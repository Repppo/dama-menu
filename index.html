<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DAÂ·MA Milano â€” Menu</title>

  <!-- Playfair Display per il wordmark -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#0b0d0f;
      --bg-soft:#0f1215;
      --card:#111418;
      --ink:#e9ecef;
      --muted:#a0a7b0;
      --accent:#e5c07b;
      --accent-strong:#d4a657;
      --radius:16px;
      --ring:rgba(229,192,123,.35);
    }
    *{box-sizing:border-box}
    html,body{
      margin:0;height:100%;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color:var(--ink);
      background:
      radial-gradient(1200px 800px at 10% -10%, rgba(229,192,123,.05), transparent 60%),
      radial-gradient(1000px 600px at 110% -20%, rgba(150, 100, 30,.06), transparent 60%),
      var(--bg);
    }
    a{color:var(--accent)}
    header{
      position:sticky; top:0; z-index:10; backdrop-filter:saturate(1.05) blur(6px);
      background:linear-gradient(180deg, rgba(0,0,0,.75), rgba(0,0,0,.4));
      border-bottom:1px solid rgba(255,255,255,.06);
    }
    .bar{
      max-width:1100px; margin:0 auto; padding:14px 16px;
      display:flex; gap:12px; align-items:center;
      flex-wrap:nowrap;
    }
    @media (max-width:560px){
      .bar{ flex-wrap:wrap; }
    }
    /* Wordmark su due righe */
    .brand{display:flex; align-items:center}
    .wordmark{
      display:flex; flex-direction:column; align-items:flex-start;
      gap:2px; text-decoration:none; color:#fff; line-height:1.05;
    }
    .wordmark .brand-text{
      font-family:"Playfair Display", serif;
      font-weight:800; letter-spacing:.08em; font-size:24px; line-height:1;
    }
    .wordmark .brand-text .sep{ margin:0 .12em; }
    .wordmark .city{
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial;
      font-weight:600; letter-spacing:.18em; text-transform:uppercase;
      color:var(--muted); font-size:11px; line-height:1;
    }

    .pill{
      background:var(--bg-soft); border:1px solid rgba(255,255,255,.06); border-radius:999px;
      padding:10px 14px; display:flex; align-items:center; gap:10px;
      box-shadow:0 1px 2px rgba(0,0,0,.25);
    }
    .pill input{
      border:none; outline:none; font-size:14px; width:240px; background:transparent; color:var(--ink);
    }
    .pill input::placeholder{color:#7c8591}

    .lang-btn{
      display:inline-flex; align-items:center; gap:10px;
      border:1px solid rgba(255,255,255,.06); background:var(--bg-soft);
      padding:8px 12px; border-radius:999px; cursor:pointer; user-select:none;
      box-shadow:0 1px 2px rgba(0,0,0,.25); color:var(--ink);
    }
    .lang-btn:hover{border-color:var(--ring); box-shadow:0 0 0 3px var(--ring) inset}
    .lang-btn .flag{width:18px; height:18px; display:block;}
    .lang-btn .flag svg{width:18px; height:18px; display:block; border-radius:50%;}

    main{max-width:1100px; margin:18px auto 80px; padding:0 16px; display:grid; grid-template-columns:280px 1fr; gap:18px}
    nav{
      position:sticky; top:70px; align-self:start; background:var(--card); border:1px solid rgba(255,255,255,.06); border-radius:var(--radius);
      padding:10px; display:flex; flex-direction:column; gap:6px; box-shadow:0 10px 20px rgba(0,0,0,.25);
    }
    nav button{
      text-align:left; padding:10px 12px; border:none; background:transparent; border-radius:10px; cursor:pointer; color:var(--ink);
    }
    nav button .emoji{margin-right:6px}
    nav button.active, nav button:hover{background:rgba(229,192,123,.10); color:var(--accent)}

    section{ display:flex; flex-direction:column; gap:22px; }
    .card{
      background:var(--card); border:1px solid rgba(255,255,255,.06); border-radius:var(--radius); padding:16px 16px 12px;
      box-shadow:0 10px 20px rgba(0,0,0,.25);
    }
    .card h2{margin:.2rem 0 10px; font-size:20px; letter-spacing:.02em}
    .grid{ display:grid; grid-template-columns:1fr auto; gap:10px 14px; align-items:start; }
    @media (max-width: 600px){ .grid{grid-template-columns:1fr} .price{justify-self:start} }
    .item-name{font-weight:600}
    .desc{color:var(--muted); font-size:13px}
    .price{ font-variant-numeric:tabular-nums; color:var(--accent); font-weight:700; justify-self:end; }
    .note{color:var(--muted); font-size:12px; margin-top:6px}

    footer{ max-width:1100px; margin:36px auto; padding:0 16px 28px; color:var(--muted); font-size:12px }

    /* Nav mobile due righe */
    @media (max-width: 880px) {
      main { grid-template-columns: 1fr; }
      .pill input { width: 160px; }
      nav {
        position: static;
        display: grid;
        grid-auto-flow: column;
        grid-auto-columns: max-content;
        grid-template-rows: repeat(2, auto);
        align-content: start;
        gap: 6px 8px;
        overflow-x: auto;
        background: var(--card);
        border-radius: var(--radius);
        border: 1px solid rgba(255,255,255,.06);
        padding: 8px;
      }
      nav button { white-space: nowrap; }
    }
    @media print{
      header, nav, .pill, .lang-btn{display:none}
      body{background:#fff; color:#000}
      .card{box-shadow:none; border:1px solid #ccc}
      .price{color:#000}
    }
  </style>
</head>
<body>
  <header>
    <div class="bar">
      <div class="brand">
        <a href="#" class="wordmark">
          <span class="brand-text">DA<span class="sep">.</span>MA</span>
          <span class="city">Milano</span>
        </a>
      </div>

      <div class="pill" role="search">
        <svg viewBox="0 0 24 24" width="18" height="18"><path fill="none" stroke="currentColor" stroke-width="2" d="m21 21-4.3-4.3M10 18a8 8 0 1 1 0-16a8 8 0 0 1 0 16Z"/></svg>
        <input id="q" placeholder="Cerca / Search..." />
      </div>

      <button id="lang" class="lang-btn" title="Cambia lingua / Switch language" aria-label="Switch language">
        <span id="flag" class="flag"></span>
        <span id="langLabel">IT</span>
      </button>
    </div>
  </header>

  <main>
    <nav id="cats"></nav>
    <section id="content"></section>
  </main>

  <footer>
    <div>Prezzi e voci trascritti dal PDF allegato. Note normalizzate per il web.</div>
  </footer>

<script>
const fmtEuro = (v) => Number(v).toFixed(2).replace('.', ',');
let lang = 'it'; // italiano di default

function flagIT(){
  return `<svg viewBox="0 0 24 24"><defs><clipPath id="c"><circle cx="12" cy="12" r="12"/></clipPath></defs><g clip-path="url(#c)"><rect width="24" height="24" fill="#fff"/><rect x="0" width="8" height="24" fill="#008C45"/><rect x="16" width="8" height="24" fill="#CD212A"/></g></svg>`;
}
function flagEN(){
  return `<svg viewBox="0 0 24 24"><defs><clipPath id="c2"><circle cx="12" cy="12" r="12"/></clipPath></defs><g clip-path="url(#c2)"><rect width="24" height="24" fill="#012169"/><rect x="10" width="4" height="24" fill="#FFF"/><rect y="10" width="24" height="4" fill="#FFF"/><rect x="11" width="2" height="24" fill="#C8102E"/><rect y="11" width="24" height="2" fill="#C8102E"/></g></svg>`;
}
function renderFlag(){
  const el = document.getElementById('flag');
  if(el) el.innerHTML = (lang==='it') ? flagIT() : flagEN();
  const lbl = document.getElementById('langLabel');
  if(lbl) lbl.textContent = lang.toUpperCase();
}

/* --- MENU (abbreviato qui per spazio, sostituisci con tuo MENU completo) --- */
const MENU = [
  { key: "coffee", emoji:"â˜•", it:"Caffetteria", en:"Coffee & Hot Drinks",
    items: [
      {it:"Espresso", en:"Espresso", price:1.30},
      {it:"Cappuccino", en:"Cappuccino", price:1.80}
    ]
  },
  { key:"soft", emoji:"ðŸ¥¤", it:"Bevande", en:"Soft Drinks",
    items:[ {it:"Acqua naturale", en:"Still Water", price:1.20} ]
  }
];

function money(v){
  if(typeof v === 'number') return 'â‚¬ ' + fmtEuro(v);
  if(typeof v === 'string' && v.includes('/')) {
    return 'â‚¬ ' + v.split('/').map(s => s.trim()).join(' / â‚¬ ');
  }
  return v || '';
}

const cats = document.getElementById('cats');
const content = document.getElementById('content');
const q = document.getElementById('q');
const langBtn = document.getElementById('lang');

function renderCats(){
  cats.innerHTML = '';
  MENU.forEach((c, i) => {
    const b = document.createElement('button');
    b.innerHTML = (c.emoji ? `<span class="emoji">${c.emoji}</span>` : '') + (lang === 'it' ? c.it : c.en);
    b.className = i===0 ? 'active' : '';
    b.addEventListener('click', () => {
      [...cats.querySelectorAll('button')].forEach(x=>x.classList.remove('active'));
      b.classList.add('active');
      if (q.value.trim()) renderAllSections();
      else renderSection(c.key);
    });
    cats.appendChild(b);
  });
}

function buildCategoryCard(cat, items){
  const card = document.createElement('div'); card.className='card';
  const h2 = document.createElement('h2');
  h2.textContent = (cat.emoji ? cat.emoji+' ' : '') + (lang==='it'?cat.it:cat.en);
  card.appendChild(h2);
  const grid = document.createElement('div'); grid.className='grid';
  items.forEach(it => {
    const name = lang==='it'? it.it : it.en;
    const desc = lang==='it'? (it.desc_it||'') : (it.desc_en||'');
    grid.appendChild(Object.assign(document.createElement('div'), {className:'item-name', textContent:name}));
    grid.appendChild(Object.assign(document.createElement('div'), {className:'price', textContent:money(it.price)}));
    if(desc){
      grid.appendChild(Object.assign(document.createElement('div'), {className:'desc', textContent:desc}));
      grid.appendChild(document.createElement('div'));
    }
  });
  card.appendChild(grid);
  return card;
}

function renderSection(key){
  const cat = MENU.find(x => x.key===key) || MENU[0];
  content.innerHTML = '';
  content.appendChild(buildCategoryCard(cat, cat.items));
}
function renderAllSections(){
  const term = (q.value||'').trim().toLowerCase();
  content.innerHTML = '';
  MENU.forEach(cat => {
    const matched = cat.items.filter(it => {
      const name = lang==='it'? it.it : it.en;
      const desc = lang==='it'? (it.desc_it||'') : (it.desc_en||'');
      return (name + ' ' + desc).toLowerCase().includes(term);
    });
    if (!term || matched.length > 0) content.appendChild(buildCategoryCard(cat, matched));
  });
}

function renderAll(){
  renderCats();
  renderSection(MENU[0].key);
  renderFlag();
}

langBtn.addEventListener('click', () => {
  lang = (lang==='it') ? 'en' : 'it';
  renderFlag();
  if (q.value.trim()) { renderCats(); renderAllSections(); }
  else renderAll();
});

q.addEventListener('input', () => {
  if (q.value.trim()) renderAllSections();
  else {
    const current = document.querySelector('#cats button.active');
    const idx = [...cats.children].indexOf(current);
    const key = MENU[idx >= 0 ? idx : 0].key;
    renderSection(key);
  }
});

renderAll();
</script>
</body>
</html>
